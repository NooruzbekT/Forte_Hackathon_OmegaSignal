# AI Business Analyst Backend ‚Äî ForteBank Hackathon

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –æ–±—ã—á–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –±–∏–∑–Ω–µ—Å-–¥–æ–∫—É–º–µ–Ω—Ç—ã (BRD, bug report –∏ —Ç.–ø.), –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ –ø—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Confluence.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ ¬´AI-–±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫¬ª –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∫–æ–º–∞–Ω–¥: –ø—Ä–æ–¥—É–∫—Ç, BA, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏, QA.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞

- üí¨ **–î–∏–∞–ª–æ–≥–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** (REST + WebSocket), –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–Ω—Ç–µ—Ä–≤—å—é
- üìÑ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**:
  - Business Requirements Document (–Ω–æ–≤—ã–µ —Ñ–∏—á–∏)
  - Bug Fix / Incident Report
  - Integration / Process Change / Data Request (—á–µ—Ä–µ–∑ `doc_type`)
- üìÅ **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DOCX** (`docs/‚Ä¶.docx`)
- üåê **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Confluence** (—Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü —á–µ—Ä–µ–∑ REST API)
- üìä **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º**:
  - Mermaid-–∫–æ–¥ (flowchart / sequence / use case)
  - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Mermaid ‚Üí PNG
  - –°—Ç–∞—Ç–∏–∫–∞ –ø–æ `/diagrams/...`
- üß† **AI-summary**:
  - –ü–æ –æ—Ç–¥–µ–ª—å–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É
  - –ü–æ –≤—Å–µ–π —Å–µ—Å—Å–∏–∏ (–¥–∏–∞–ª–æ–≥ + –¥–æ–∫—É–º–µ–Ω—Ç)
- üìö **–ò—Å—Ç–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**:
  - –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤ SQLite
  - –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.13.5**
- **FastAPI** ‚Äî REST API + WebSocket
- **SQLite** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –∏ –∏—Å—Ç–æ—Ä–∏–∏
- **python-docx** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è DOCX
- **Mermaid ‚Üí PNG** ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–∏–∞–≥—Ä–∞–º–º –Ω–∞ –±—ç–∫–µ
- **Confluence REST API** ‚Äî –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `logging`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### `BAAssistant`
–ö–ª–∞—Å—Å-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–∏–∞–ª–æ–≥–∞:
- –í–µ–¥—ë—Ç –∏—Å—Ç–æ—Ä–∏—é —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (`doc_type`)
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–æ–º–µ–Ω—Ç ¬´–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏¬ª –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç DOCX
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—É–±–ª–∏–∫—É–µ—Ç –≤ Confluence

#### `LLMClient`
–û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ LLM-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º:
- `chat(...)` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏

#### `SessionHistory`
–†–∞–±–æ—Ç–∞ —Å SQLite:
- –¢–∞–±–ª–∏—Ü–∞ `sessions` (—Å—Ç–∞—Ç—É—Å, –ø—Ä–æ–≥—Ä–µ—Å—Å, doc_type, created_at, updated_at, document_path, metadata)
- –¢–∞–±–ª–∏—Ü–∞ `messages` (–∏—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –ø–æ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏)
- –ú–µ—Ç–æ–¥—ã `create_session / update_session / get_session / get_session_messages / cleanup`

#### `MermaidToPNGConverter`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç mermaid-–∫–æ–¥
- –†–µ–Ω–¥–µ—Ä–∏—Ç –µ–≥–æ –≤ PNG
- –õ–∏–±–æ –æ—Ç–¥–∞—ë—Ç base64-—Å—Ç—Ä–æ–∫—É, –ª–∏–±–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª –≤ `diagrams/`

#### `ConfluenceClient`
- –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ Confluence —á–µ—Ä–µ–∑ REST API
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç HTML-–∫–æ–Ω—Ç–µ–Ω—Ç (—É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –∏–∑ markdown + –¥–∏–∞–≥—Ä–∞–º–º)

#### `AppState` (`app_state`)
–•—Ä–∞–Ω–∏—Ç —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã:
- `assistant`
- `history_db`
- `llm`
- `mermaid_converter`
- `confluence_client`
- –ê–∫—Ç–∏–≤–Ω—ã–µ WebSocket-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <url_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd forte_hackathon  # –∏–ª–∏ –∏–º—è –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

### 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
python -m venv .venv
source .venv/bin/activate      # Linux / macOS
# –∏–ª–∏
.venv\Scripts\activate         # Windows

pip install -r requirements.txt
```

**–í–∞–∂–Ω–æ:** –î–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–µ–Ω –ø–∞–∫–µ—Ç:

```bash
pip install python-multipart
```

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` —Ä—è–¥–æ–º —Å `api_server.py`:

```env
# Confluence (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
CONFLUENCE_URL=https://<your-domain>.atlassian.net/wiki
CONFLUENCE_USERNAME=your_email@domain.com
CONFLUENCE_API_TOKEN=your_api_token
CONFLUENCE_SPACE_KEY=AI

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–ø—Ä–∏–º–µ—Ä)
LLM_PROVIDER=openai
LLM_MODEL_NAME=gpt-4.1-mini
LLM_API_KEY=sk-...
```

–ï—Å–ª–∏ `CONFLUENCE_URL` –Ω–µ –∑–∞–¥–∞–Ω, Confluence-–∫–ª–∏–µ–Ω—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è, –∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤–µ—Ä–Ω—É—Ç `503 Confluence not configured`.

### 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
uvicorn api_server:app --reload
```

–°–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞:

```
http://localhost:8000
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `GET /` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π health + –∏–Ω—Ñ–∞ –æ –º–æ–¥–µ–ª—è—Ö
- `GET /health` ‚Äî –ø—Ä–æ—Å—Ç–æ–π health

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–∑–Ω–µ—Å-—Ñ–ª–æ—É

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (BRD / Bug / Integration)

–§—Ä–æ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç:

```http
POST /api/chat
{
  "message": "–ù—É–∂–µ–Ω BRD –¥–ª—è –∞–≤—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫–æ–º–º—É–Ω–∞–ª–∫–µ"
}
```

**–ë—ç–∫–µ–Ω–¥:**
1. –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –≤ SQLite
2. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `new_feature`)
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `session_id` –∏ –ø–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

–î–∞–ª–µ–µ —Ñ—Ä–æ–Ω—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `/api/chat` —Å —Ç–µ–º –∂–µ `session_id`, –ø–æ–∫–∞ `progress < 1.0`.

–ö–æ–≥–¥–∞ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
1. –°–æ–±–∏—Ä–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ –≤ DOCX (`docs/....docx`)
3. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ Confluence:
   - –ü—É–±–ª–∏–∫—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç URL
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å `document_ready = true`

### 2. –î–∏–∞–ª–æ–≥–æ–≤—ã–π —Ä–µ–∂–∏–º (WebSocket)

–§—Ä–æ–Ω—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WS `/ws/chat/{session_id}`.

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤–∏–¥–∞:

```json
{ "type": "message", "content": "–¢–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" }
```

–ë—ç–∫–µ–Ω–¥ —à–ª—ë—Ç —Å–æ–±—ã—Ç–∏—è:
- `connected`
- `typing`
- `response` (—Å —Ç–µ–º–∏ –∂–µ –ø–æ–ª—è–º–∏, —á—Ç–æ –∏ REST `/api/chat`)
- `error`

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∂–∏–≤–æ–π —á–∞—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

### 3. –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

- `GET /api/documents` ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö `.docx`
- `GET /api/documents/{filename}` ‚Äî —Å–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `GET /api/session/{session_id}/document` ‚Äî —Å–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–µ–π
- `POST /api/session/{session_id}/upload-doc` ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π —Ñ–∞–π–ª –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –µ–≥–æ –∫ —Å–µ—Å—Å–∏–∏ (multipart)

–§–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `docs/` (–ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–∞–∫ —Å—Ç–∞—Ç–∏–∫–∞).

### 4. –î–∏–∞–≥—Ä–∞–º–º—ã

#### `POST /api/diagrams/generate`
–ù–∞ –≤—Ö–æ–¥: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (steps, participants, use cases).
–ù–∞ –≤—ã—Ö–æ–¥: `mermaid_code` (flowchart / sequence / use case / KPI dashboard).

#### `POST /api/diagrams/mermaid-to-png`
–ù–∞ –≤—Ö–æ–¥: mermaid-–∫–æ–¥ + —Ñ–ª–∞–≥ `return_base64`.

**–í–∞—Ä–∏–∞–Ω—Ç 1: base64**

```json
{
  "format": "base64",
  "data": "data:image/png;base64,...."
}
```

‚Üí —Ñ—Ä–æ–Ω—Ç —Å—Ç–∞–≤–∏—Ç –∫–∞–∫:

```html
<img src="data:image/png;base64,...." />
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: —Ñ–∞–π–ª**

```json
{
  "format": "file",
  "path": "diagrams/<uuid>.png",
  "url": "/diagrams/<uuid>.png"
}
```

‚Üí —Ñ—Ä–æ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

```html
<img src="http://localhost:8000/diagrams/<uuid>.png" />
```

### 5. Confluence

#### `POST /api/confluence/publish`

–ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ Confluence.

```json
{
  "title": "BRD - Autopay",
  "content": "# Business Requirements\n...",
  "mermaid_diagrams": {
    "Process Flow": "flowchart TD\n...",
    "Use Case Diagram": "flowchart TD\n..."
  }
}
```

–û—Ç–≤–µ—Ç:

```json
{
  "status": "ok",
  "page_id": "589922",
  "page_url": "https://.../wiki/spaces/AI/pages/589922/..."
}
```

–í–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ConfluenceClient`, –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ–±–∏—Ä–∞–µ—Ç HTML (markdown ‚Üí HTML, + PNG-–¥–∏–∞–≥—Ä–∞–º–º—ã)
- –°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É —á–µ—Ä–µ–∑ REST API
- –õ–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ (401 –∏ —Ç.–ø.)

---

## –ò—Å—Ç–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- `GET /api/history` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π + —Å–æ–æ–±—â–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏
- `GET /api/history/{session_id}` ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ –æ–¥–Ω–æ–π —Å–µ—Å—Å–∏–∏
- `DELETE /api/history/{session_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–µ—Å—Å–∏–∏
- `GET /api/statistics` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - –í—Å–µ–≥–æ —Å–µ—Å—Å–∏–π
  - –ê–∫—Ç–∏–≤–Ω—ã–µ/–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ
  - –ü–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

---

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/` | Health check + –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª—è—Ö |
| `GET` | `/health` | –ü—Ä–æ—Å—Ç–æ–π health check |
| `POST` | `/api/chat` | REST-–¥–∏–∞–ª–æ–≥ —Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º |
| `WS` | `/ws/chat/{session_id}` | WebSocket-–¥–∏–∞–ª–æ–≥ |
| `GET` | `/api/documents` | –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ |
| `GET` | `/api/documents/{filename}` | –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç |
| `POST` | `/api/diagrams/generate` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è mermaid-–¥–∏–∞–≥—Ä–∞–º–º—ã |
| `POST` | `/api/diagrams/mermaid-to-png` | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è mermaid –≤ PNG |
| `POST` | `/api/confluence/publish` | –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ Confluence |
| `GET` | `/api/history` | –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π |
| `GET` | `/api/statistics` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |

---


## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π Python `logging`. –õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å —É—Ä–æ–≤–Ω–µ–º `INFO`.

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `sessions.db` —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

**–°—Ö–µ–º–∞:**
- `sessions` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏—è—Ö
- `messages` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ú–µ—Ç–æ–¥ `cleanup()` –≤ `SessionHistoryDB` –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–µ—Å—Å–∏–∏ —Å—Ç–∞—Ä—à–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–Ω–µ–π.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è ForteBank Hackathon.

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∫–æ–º–∞–Ω–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
@oldsugar